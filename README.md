# 🛫 Pick&Pack 🛬

<Br>
<Br>
<Br>

## 🌎 Pick 서비스 - 메인 페이지

<br>
<br>

### 지도 & 여행지 서비스

- 각 나라의 공항 위치와 상세 정보를 제공.

<div width="100%">
<img src="https://drive.google.com/uc?export=view&id=16ORns1eZsC4nLyPDsAeySEKXKbM1Dvqv" width="77%"> 
<img src="https://drive.google.com/uc?export=view&id=1PlX8lH0BDnANok26_y0tgTwSY1jMg2tp" width="77%"> 
</div> 

<br/>



### 인기 여행지

- 대류별 인기 여행지를 제공.
- 여행지 클릭시, 지도 해당 여행지가 확대 되고, 상세 정보를 제공.
- 주변의 가까운 공항 정보와 위치 제공.

<br>

<div width="100%">
<img src="https://drive.google.com/uc?export=view&id=1tHtfwRjCO3mfXXMbspQaV-t1ESycy2GF" width="77%"> 
</div>


<br/>

### 항공권 검색

- 편도/왕복으로 검색 지원.
- 출발지/도착지 선택, 날짜 선택, 검색조건(경유조건, 가격조건) 설정 후 검색 지원.

<br>

<div width="100%">
<img src="https://drive.google.com/uc?export=view&id=1_BibUfU4tKV-NXhwWPjPUrLn5a6LesXs" width="100%"> 
<img src="https://drive.google.com/uc?export=view&id=1BSs2U5GDzmlXb4s_hfZK_MgzV1pd2k9Z" width="100%"> 
</div>

<br/>
<br/>


### 항공권 검색 결과

<br>

- 실제와 동일한 항공권 마크와 색상으로 항공권 구별.
- 항공권을 5개까지 비교할 수 있는 기능 지원.
- 항공권 조회 결과 리스트 정렬 기능 지원.
    - 금액 낮은 순
    - 변동폭 큰 순
    - 출발시간 빠른 순
    - 소요시간 낮은 순

- 무한 스크롤로 조회 결과 제공.

<br>


<div width="100%">
<img src="https://drive.google.com/uc?export=view&id=1E4AHWRgVMLkm1v-__M45Qfh4AQ-TkDs4" width="100%"> 
<img src="https://drive.google.com/uc?export=view&id=1o1hOpnde20ZwhsyopXjk3EV8QncpBtsf" width="100%"> 
</div>

<br>
<br>
<br>

### 항공권 상세

<br>

- 각 항공권의 상세정보와 가격 변화의 추이 정보를 제공.
- 비교하기에 넣은 항공권에 대해 가격 비교와 추이 비교를 그래프로 지원.
- 찜하기 기능 & 알림 기능 지원.


<br>
<Br>
<br>

> 편도 검색 결과

<br>

<div width="100%">
<img src="https://drive.google.com/uc?export=view&id=1lGaQrm0L8yesChbDk_ZdKj-Vnz33nz1E" width="100%"> 
<img src="https://drive.google.com/uc?export=view&id=1k2NTE8m66uz_kT4t8cFldMDafNe09LVs" width="100%"> 
<img src="https://drive.google.com/uc?export=view&id=1hJ8Rxc9aUD6Jwa3URzysHUDhVJ0YQSa7" width="100%"> 
</div> 

> 왕복 검색 결과

<br>

<div width="100%">
<img src="https://drive.google.com/uc?export=view&id=105Gt2K7hfmT37p3LsJshs1Cl376CyURl" width="100%"> 
<img src="https://drive.google.com/uc?export=view&id=1UREK3B66UKKiS87YyGb6v5c1GKGntnQB" width="100%"> 
<img src="https://drive.google.com/uc?export=view&id=1y_buVBadG8iu1ngDcQpxO7_dGdTFEUKA" width="100%"> 
</div> 


<br>
<br>
<hr>
<br>
<br>

## 🛒 Pack 서비스 

<br>
<br>
<br>


### 여행 물품 거래 서비스

- 살게요/팔게요
  - 여행물품 중고 거래 서비스 제공.

- 빌려주세요/빌려드려요
  - 여행 물품 대여 서비스 제공.

- 모든 카테고리 조회 결과를 무한 스크롤 형태로 제공.
- 제목을 기준으로 도시와 물품으로 검색 기능 제공.
- 게시물 등록/수정 기능
  - 해당 물품에 관련된 사진을 여러장 기입 가능.

<br>


<div width="100%">
<img src="https://drive.google.com/uc?export=view&id=1HvwgVdoJmExi7eH3ZuuLDGIrKFxqj0DR" width="100%"> 
<img src="https://drive.google.com/uc?export=view&id=10kAS3Adp1Q9dS-QY7Z-5dOXP4_IJTl14" width="100%"> 
<img src="https://drive.google.com/uc?export=view&id=17GBuGgMBVKe_DivusvQ2ydbY-n_YNKdD" width="100%"> 
<img src="https://drive.google.com/uc?export=view&id=1VvPZ_p3hDlOSJ5M08ZzEhiYTvO2i_22c" width="100%"> 
</div>

<br>
<br>
<hr>
<br>
<br>

## 🪂 사용자 서비스 페이지

<br>
<br>

### 로그인/회원가입

- 아이디 및 닉네임 중복 검사 체크
- 로그인 시, 희망 가격을 정해놓은 찜한 항공권 알림 지원.

<br>


<div width="100%">
<img src="https://drive.google.com/uc?export=view&id=16ORns1eZsC4nLyPDsAeySEKXKbM1Dvqv" width="100%"> 
<img src="https://drive.google.com/uc?export=view&id=15I7ME8Q0FFap81AtsPdseg1ijvyxXu_O" width="100%"> 
</div>

<br/>
<br>
<br>

## 마이페이지

- 찜한 항공권에 대해 희망 가격 설정 할 수 있는 기능 지원.
- 희망 가격 이하의 항공권이 올라올 시, 알림 서비스 지원.
- pack 서비스에 대한 찜한 목록 제공.

<br>

<div width="100%">
<img src="https://drive.google.com/uc?export=view&id=17GBuGgMBVKe_DivusvQ2ydbY-n_YNKdD" width="100%"> 
<img src="https://drive.google.com/uc?export=view&id=1VvPZ_p3hDlOSJ5M08ZzEhiYTvO2i_22c" width="100%"> 
<img src="https://drive.google.com/uc?export=view&id=1XLHPn6bJa1gwPVUaPNf6zPqrGdNRjjra" width="100%"> 
<img src="https://drive.google.com/uc?export=view&id=116XUFJDYUCzEiBtaLLoeKXuXojrszQo1" width="100%"> 
</div>

<br>
<br>
<br>

## 채팅

- 판매자와 구매자의 실시간 채팅 제공.
- 새로운 메세지에 대한 알림과 과거 대화 내용 기록.
- 사진(여러개) 전송 가능.
- 구매완료를 등록 가능.

<br>

<div width="100%">
<img src="https://drive.google.com/uc?export=view&id=1Sd0urVarB7TbIZvojh5tAq01lNfdDxtK" width="100%"> 
</div>


<br>
<br>
<br>

<!-- 기술스택 -->
--- 


<div align = "center" style="font-size:30px">
  <h1>🛫 Co-work tool 🛬</h1>

<img src="https://img.shields.io/badge/Jira-0052CC?style=for-the-badge&logo=Jira Software&logoColor=white">
<img src="https://img.shields.io/badge/Mattermost-0058CC?style=for-the-badge&logo=Mattermost&logoColor=white">
<br>
<img src="https://img.shields.io/badge/GitLab-FC6D26?style=for-the-badge&logo=GitLab&logoColor=white">
<img src="https://img.shields.io/badge/Figma-F24E1E?style=for-the-badge&logo=Figma&logoColor=white">
<img src="https://img.shields.io/badge/Notion-000000?style=for-the-badge&logo=Notion&logoColor=white">
<img src="https://img.shields.io/badge/Postman-FF6C37?style=for-the-badge&logo=Postman&logoColor=white">
<br>
</div>

<br>

## 🖥 개발환경

- 형상관리 : Gitlab
- 이슈관리 : Jira
- 커뮤니케이션 : Mattermost, Notion
- 디자인 : Figma

<br>

### 🛠 기타 편의 툴

- Postman
- Termius

<br>

<div align = "center" style="font-size:30px">
  <h1>✨ Front End Stack ✨</h1>

<img src="https://img.shields.io/badge/react-skyblue?style=for-the-badge&logo=react&logoColor=white">
<img src="https://img.shields.io/badge/redux-b22af7?style=for-the-badge&logo=redux&logoColor=white">
<img src="https://img.shields.io/badge/ESLint-4B32C3?style=for-the-badge&logo=ESLint&logoColor=white">
<br>
<img src="https://img.shields.io/badge/styleComponents-DB7093?style=for-the-badge&logo=styled-components&logoColor=white">
<img src="https://img.shields.io/badge/npm-CB3837?style=for-the-badge&logo=npm&logoColor=white">
<img src="https://img.shields.io/badge/Prettier-F7B93E?style=for-the-badge&logo=Prettier&logoColor=white">
<img src="https://img.shields.io/badge/Babel-F9DC3E?style=for-the-badge&logo=Babel&logoColor=white">
</div>

<br>
<br>

- IDE : Visual Studio Code
- language
  - node js `18.13.0`
- formatter
  - eslint `8.32.0`
  - prettier `2.8.3`
- Library
  - react `18.2.0`
  - react-dom `18.2.0`
  - router
    - react-router-dom `6.9.0`
  - state management tool
    - react-redux `8.0.5`
    - reduxjs/toolkit `1.9.3`
    - redux-persist `6.0.0`
  - http
    - Axios `1.3.4`
  - map
    - react-leaflet `4.2.1`
  - chart
    - chart.js `4.2.1`
  - chat
    - sockjs `0.3.24`
    - sockjs-client `1.6.1`
    - stompjs `2.3.3`
    - stomp/stompjs `7.0.0`
  - style
    - styled-components `5.3.9`
    - react-icons `4.8.0`
  - etc
    - aws-sdk `2.1349.0`
    - firebase `9.19.1`
    - jwt-decode `3.1.2`
    - js-sha256 `0.9.0`

<br>

<div align = "center" style="font-size:30px">
  <h1>✨ Back End Stack ✨</h1>

<img src="https://img.shields.io/badge/nginx-009639?style=for-the-badge&logo=nginx&logoColor=white">
<img src="https://img.shields.io/badge/linux-yellow?style=for-the-badge&logo=linux&logoColor=black">
<img src="https://img.shields.io/badge/docker-2481D4?style=for-the-badge&logo=docker&logoColor=white">
<img src="https://img.shields.io/badge/ubuntu-D24939?style=for-the-badge&logo=ubuntu&logoColor=white">
<img src="https://img.shields.io/badge/jenkins-D33832?style=for-the-badge&logo=jenkins&logoColor=black">
<br>
<img src="https://img.shields.io/badge/Amazon EC2-FF9900?style=for-the-badge&logo=Amazon EC2&logoColor=black">
<img src="https://img.shields.io/badge/Amazon AWS-FF9900?style=for-the-badge&logo=Amazon AWS&logoColor=black">
<img src="https://img.shields.io/badge/Amazon S3-569A31?style=for-the-badge&logo=Amazon S3&logoColor=black">
<br>
<img src="https://img.shields.io/badge/Spring Boot-6DB33F?style=for-the-badge&logo=Spring Boot&logoColor=white">
<img src="https://img.shields.io/badge/Spring Security-6DB33F?style=for-the-badge&logo=Spring Security&logoColor=white">
<img src="https://img.shields.io/badge/Spring cloud-6DB33F?style=for-the-badge&logo=icloud&logoColor=white">
<img src="https://img.shields.io/badge/firebase-FFCA28?style=for-the-badge&logo=icloud&logoColor=white">
<br>
<img src="https://img.shields.io/badge/Let's Encrypt-003A70?style=for-the-badge&logo=Let's Encrypt&logoColor=white">
<img src="https://img.shields.io/badge/prometheus-E6522C?style=for-the-badge&logo=Let's Encrypt&logoColor=white">
<img src="https://img.shields.io/badge/Gradle-02303A?style=for-the-badge&logo=Gradle&logoColor=white">
<img src="https://img.shields.io/badge/apachespark-E25A1C?style=for-the-badge&logo=icloud&logoColor=white">
<img src="https://img.shields.io/badge/apachehadoop-66CCFF?style=for-the-badge&logo=icloud&logoColor=white">
<br>

</div>

<br>
<br>

- IDE : Intellij IDEA `2020.3`
- language : Java openjdk `11.0.15 2022-04-19 LTS`
- Springboot `2.7.9`
  - Spring Data JPA
  - Spring Data redis
  - Lombok
  - Spring Security
  - Spring Cloud `2021.0.5`
  - Spring Cloud Discovery
  - Spring Cloud Config
  - Spring Cloud AWS
  - Logback `7.2`
  - Validation
  - Spring Web
  - Spring Websocket
- Build tool : Gradle `7.6`
- QueryDsl `1.0.10`
- firebase `7.1.1`
- jackson
- Micrometer Prometheus
- com.auth0:java-jwt `4.0.0`
- okhttp3 `4.2.2`

<br>

## 📚 DB

- Mysql `8.0.32-0ubuntu0.20.04.2`

<br>

## 🛰 Server

- https `TLS 1.0`
- Ubuntu `20.0.4`
- Nginx `1.18.0`
- Docker `20.10.23`
- Jenkins `Jenkins/jenkins:lts-jdk11`(Image tag name)

<br>

---

## 🏰 시스템 아키텍쳐

<div width="100%">
  <img src="https://drive.google.com/uc?export=view&id=1zkKKIIMpOZEOJtY1fs1G9mSkG0cnTJrc" width="100%">
</div>

<br>

### ✨ 기술 특이점

<br>
<br>

🎯 **빅데이터 분산 시스템 구현**


* ⚙ 항공권 크롤링
  - Selenium을 통해 G마켓 항공에서 매일 미래 7일치 항공권 데이터를 수집 (1일 약 40만건)

* 🐘 Hadoop
  - 수집한 항공권 데이터를 전처리 및 부하방지를 위해 분산 저장


- 🍧 **Spark**

  - Python 기반의 PySpark 사용
  - HDFS에 있는 오늘 날짜의 파일에 있는 데이터를 정제해 항공권 정보를 MySQL DB에 저장
  - HDFS에 있는 과거 파일을 모두 읽어 항공권의 과거 가격 정보를 연산


🎯 **MSA 설계**

- 배포

  - 서비스별 배포가 가능.(배포시 전체 서비스의 중단이 없음)
  - 특정 서비스의 요구사항만 반영하여, 빠르게 배포 가능.

- 확장

  - 다양하고, 새로운 서비스에 대한 유연한 확장 가능.

- 장애
  - 일부 서비스의 장애가 전체 서비스로 확장될 가능성을 차단.
    (User service 에 해당하는 장애가 Owner service에 영향을 미치지 ❌)
  - 부분적 장애에 대한 격리 처리 가능.


🎯 **redis사용**

* redis 캐시 db
  - redis에 채팅방 정보와 채팅 메시지를 저장
  - 채팅에 사용한 Redis Cache Strategy Pattern
  - 변경이 적고 자주 사용되는 정보들(유적지 데이터/ 회원 데이터 조회) 캐시로 저장.

* redis pub/sub
  - STOMP와 Redis의 pub/sub구조를 이용하여 실시간 채팅 기능 구현

* Cache warming
  - write back후 전 날 00시부터의 채팅 메시지를 redis에 데이터를 밀어 넣어둠

* Write-Back
  - 새벽 3시마다 Spring Scheduler와 Jdbctemplate을 이용하여, Redis에 쌓아놨던 데이터들을 db로 bulk insert를 진행

* Look-Aside(Lazy Loading)
  - 클라이언트가 채팅 메시지 읽기 요청 시 Redis에서 먼저 확인
  - 더 과거의 채팅 메시지를 요청 시  DB에서 데이터를 조회하여 Redis에 저장 후, 결과 값 반환
  - 무한스크롤을 구현했기 때문에, 한번에 하루 치의 데이터씩만 Redis에 저장함.

* Redis Sentinel
  - HA를 위해 Auto Failover를 수행할 수 있는 Sentinel을 구성함
  - Redis 서버 3대, Redis Sentinel을 5대 기동


<br>
<br>
<br>



🎯 **모니터링**

* prometheus & grafana
  - 서버의 metric을 수집하여, 해당 서버의 부하 및 메모리 사용량 등을 시각화

<br>
<br>
<br>


🎯 **log분석**

* elk
  - logstash : 서버의 로그를 수집
  - elasticsearch : 로그 검색 기능
  - kibana : 로그 데이터 시각화


<br>
<br>
<br>


---

### 🛫 API 명세

<div width="100%">
  <img src="https://drive.google.com/uc?export=view&id=1mt54R7sMdwf0WWbGRWsaKMH6KGJKbmHl" width="70%">
  <img src="https://drive.google.com/uc?export=view&id=1siXeEcYiljR2dzVHZ85Sr-h1ABoh9g0T" width="70%">
  <img src="https://drive.google.com/uc?export=view&id=15Z3_NzmEr2Mp9lLrtMw89hRxCBSlfAI5" width="70%">
</div>

[API 명세](https://www.notion.so/987c7609e4c1491caa0ff3fc83b68769?v=690b99930e7f4f0cb4268b60d2490ffd&pvs=4)

<br>

---

### 🐢 화면 설계서

<div width="100%">
  <img src="https://drive.google.com/uc?export=view&id=1ADQ-OE8cyUz49u9BZDkUFYdyd7GOLKKp" width="100%">
</div>

[화면 설계서](https://www.figma.com/file/YCQOMqUG2XwAxxGQKbm4L1/%ED%8A%B8%EB%9E%98%EB%B8%94-%EB%A9%94%EC%9D%B4%EC%BB%A4?node-id=0-1&t=dbbvDJDOfWRr4wHQ-0)

<br>

---

<br>
<br>
<br>

### ⛺ ER Diagram

<div width="100%">
  <img src="https://drive.google.com/uc?export=view&id=1zqC0r0dZJedS1HbVtvYnSBtBgO0i60Nh" width="100%">
</div>
[ER Diagram](https://www.erdcloud.com/d/DQ8Lr5CfJQKmjWGvL)

<br>

## 🍀 PickPack 팀의 개발자들을 소개합니다!!

| 최희수          | 김승희   | 이상민   | 김아린  | 신현광  | 허윤회  |
| ----------------- | -------- | -------- | ------- | ------- | ------- |
| <img src="https://drive.google.com/uc?export=view&id=1Aa5NYhPoOCgEs5zLE_TKz9HhzbBkxluq" width="100"> |<img src="https://drive.google.com/uc?export=view&id=1iRNaffC1C31PEIkaKrORM2K_dcXfVQBP" width="100">  | <img src="https://drive.google.com/uc?export=view&id=1R2oxLcnj5wYU-uxUN_doBKmwCw0E3f1O" width="100"> | <img src="https://drive.google.com/uc?export=view&id=1OS2S1F7fOgOJLcy4S1iZxWJ8ZVR1QXQy" width="100"> | <img src="https://drive.google.com/uc?export=view&id=1Ovhz5u-F0prGnCZDD6EBCX2r0sNLrEjX" width="100">  | <img src="https://drive.google.com/uc?export=view&id=1xurbEFC175fHUnzxL9rmap9vUR_BvyUL" width="100">  |
| Leader & Backend | Backend | Backend | Backend | Frontend | Frontend |

<br>
<br>
<br>




### 🐥 팀원 역할


